<!doctype html>
<html lang="en">
<head>
<title></title>
<!-- 2017-05-29 mån 04:06 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Org-mode">
<meta name="author" content="arvid">

<link  href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
<style type="text/css">
/* org mode styles on top of twbs */

html {
    position: relative;
    min-height: 100%;
}

body {
    font-size: 18px;
    margin-bottom: 105px;
}

footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 101px;
    background-color: #f5f5f5;
}

footer > div {
    padding: 10px;
}

footer p {
    margin: 0 0 5px;
    text-align: center;
    font-size: 16px;
}

#table-of-contents {
    margin-top: 20px;
    margin-bottom: 20px;
}

blockquote p {
    font-size: 18px;
}

pre {
    font-size: 16px;
}

.footpara {
    display: inline-block;
}

figcaption {
  font-size: 16px;
  color: #666;
  font-style: italic;
  padding-bottom: 15px;
}

/* from twbs docs */

.bs-docs-sidebar.affix {
    position: static;
}
@media (min-width: 768px) {
    .bs-docs-sidebar {
        padding-left: 20px;
    }
}

/* All levels of nav */
.bs-docs-sidebar .nav > li > a {
    display: block;
    padding: 4px 20px;
    font-size: 14px;
    font-weight: 500;
    color: #999;
}
.bs-docs-sidebar .nav > li > a:hover,
.bs-docs-sidebar .nav > li > a:focus {
    padding-left: 19px;
    color: #A1283B;
    text-decoration: none;
    background-color: transparent;
    border-left: 1px solid #A1283B;
}
.bs-docs-sidebar .nav > .active > a,
.bs-docs-sidebar .nav > .active:hover > a,
.bs-docs-sidebar .nav > .active:focus > a {
    padding-left: 18px;
    font-weight: bold;
    color: #A1283B;
    background-color: transparent;
    border-left: 2px solid #A1283B;
}

/* Nav: second level (shown on .active) */
.bs-docs-sidebar .nav .nav {
    display: none; /* Hide by default, but at >768px, show it */
    padding-bottom: 10px;
}
.bs-docs-sidebar .nav .nav > li > a {
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 30px;
    font-size: 12px;
    font-weight: normal;
}
.bs-docs-sidebar .nav .nav > li > a:hover,
.bs-docs-sidebar .nav .nav > li > a:focus {
    padding-left: 29px;
}
.bs-docs-sidebar .nav .nav > .active > a,
.bs-docs-sidebar .nav .nav > .active:hover > a,
.bs-docs-sidebar .nav .nav > .active:focus > a {
    padding-left: 28px;
    font-weight: 500;
}

/* Nav: third level (shown on .active) */
.bs-docs-sidebar .nav .nav .nav {
    padding-bottom: 10px;
}
.bs-docs-sidebar .nav .nav .nav > li > a {
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 40px;
    font-size: 12px;
    font-weight: normal;
}
.bs-docs-sidebar .nav .nav .nav > li > a:hover,
.bs-docs-sidebar .nav .nav .nav > li > a:focus {
    padding-left: 39px;
}
.bs-docs-sidebar .nav .nav .nav > .active > a,
.bs-docs-sidebar .nav .nav .nav > .active:hover > a,
.bs-docs-sidebar .nav .nav .nav > .active:focus > a {
    padding-left: 38px;
    font-weight: 500;
}

/* Show and affix the side nav when space allows it */
@media (min-width: 992px) {
    .bs-docs-sidebar .nav > .active > ul {
        display: block;
    }
    /* Widen the fixed sidebar */
    .bs-docs-sidebar.affix,
    .bs-docs-sidebar.affix-bottom {
        width: 213px;
    }
    .bs-docs-sidebar.affix {
        position: fixed; /* Undo the static from mobile first approach */
        top: 20px;
    }
    .bs-docs-sidebar.affix-bottom {
        position: absolute; /* Undo the static from mobile first approach */
    }
    .bs-docs-sidebar.affix .bs-docs-sidenav,.bs-docs-sidebar.affix-bottom .bs-docs-sidenav {
        margin-top: 0;
        margin-bottom: 0
    }
}
@media (min-width: 1200px) {
    /* Widen the fixed sidebar again */
    .bs-docs-sidebar.affix-bottom,
    .bs-docs-sidebar.affix {
        width: 263px;
    }
}
</style>
<style>body { margin-bottom: 0px; }</style><script type="text/javascript">
$(function() {
    'use strict';

    $('.bs-docs-sidebar li').first().addClass('active');

    $(document.body).scrollspy({target: '.bs-docs-sidebar'});

    $('.bs-docs-sidebar').affix();
});
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  displayAlign: "center",
  displayIndent: "2em",
  messageStyle: "none",
  "HTML-CSS": {
    scale: 100,
    styles: {
      ".MathJax_Display": {
        "font-size": "100%"
      }
    }
  },
  "SVG": {
    scale: 100,
    styles: {
      ".MathJax_SVG_Display": {
        "font-size": "100%",
        "margin-left": "-2.281em"
      }
    }
  }
});
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_SVG"></script>
</head>
<body>
<div id="content" class="container">
<div class="row"><div class="col-md-12"><h1 class="title"></h1>
<div id="outline-container-sec-" class="outline-2">
<h2 id="sec-">Teknisk dagbok - Projekt VT 2017</h2>
<div class="outline-text-2" id="text-">
<p>
<i>Arvid Sigvardsson</i>
</p>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-04-03</h3>
<div class="outline-text-3" id="text-">
</div><div id="outline-container-sec-" class="outline-4">
<h4 id="sec-">Teknologier</h4>
<div class="outline-text-4" id="text-">
<p>
Vi brainstormade olika ideer till postitioneringssystem:
</p>
<ol class="org-ol">
<li>Ultraljud
</li>
<li>Ultra wide band
</li>
<li>Snöre som roboten drar ut, vinkeln och längden bestämmer postitionen
</li>
<li>Projicerat färgspektrum
</li>
<li>RFID-taggar utplacerade i golvet
</li>
<li>INS, inertial navigation system
</li>
</ol>
</div>
</div>
<div id="outline-container-sec-" class="outline-4">
<h4 id="sec-">Indelning och systematisering</h4>
<div class="outline-text-4" id="text-">
<p>
(1) och (2) är trianguleringsmetoder, medan de andra innebär någon form av fysisk lokalisering. Vi gjorde åtskillnad på centraliserade och decentraliserade system. I de centrala systemen fastställs postitionen centralt av systemet, inte "ombord" på roboten. Detta kräver någon form av trådlös kommunikation till en modul på roboten, t ex wifi eller bluetooth. De decentraliserade lösningarna räknar ut positionen direkt i modulen på roboten.
</p>
</div>
</div>
<div id="outline-container-sec-" class="outline-4">
<h4 id="sec-">Andra alternativ</h4>
<div class="outline-text-4" id="text-">
<p>
Vi diskuterade även möjligheten att använda en/flera kameror och utföra någon bildbehandling. En variant är att ha en överblicksbild och indela bilden i ett rutnät. Annan variant är att använda kamera för triangulering. Alla vi i gruppen är lite skeptiska till kameraideerna, lite oklart varför.
</p>
</div>
</div>
<div id="outline-container-sec-" class="outline-4">
<h4 id="sec-">Två stycken lösningar</h4>
<div class="outline-text-4" id="text-">
<p>
Det lutar åt att vi försöker oss på två lösningar som vi arbetar med parallellt, en enklare och en mer avancerad/noggrann. Delvis för att kunna leverera något system i god tid för plattformsgrupperna att testa, men fortfarande kunna leverera ett noggrant system. Delvis för att ha redundancy, om ett system inte fungerar så kan vi använda det andra.
</p>
</div>
</div>
<div id="outline-container-sec-" class="outline-4">
<h4 id="sec-">Orientering</h4>
<div class="outline-text-4" id="text-">
<p>
Det är inte helt klart i vår uppgiftsbeskrivning om vi ska leverera ett system som räknar ut robotens orientering, alltså i vilken riktning den tittar/kör. Det är klart att det är något som krävs för att klara uppgiften, men det kan vara så att plattformsgrupperna ska hantera detta själva. Jag/vi lutar åt att det är något vi ska utföra. Jag ser tre lösningar på problemet:
</p>
<ul class="org-ul">
<li>gyroskop, tangerar INS ovan
</li>
<li>ultraljud med två mikrofoner, och mäta fasskillnad (?) mellan dem
</li>
<li>räkna ut orientering mha bildbehandling
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-" class="outline-4">
<h4 id="sec-">Kommunikationsprotokoll</h4>
<div class="outline-text-4" id="text-">
<p>
Vi diskuterade med plattformsgrupperna att vi behöver bestämma hur vår positioneringsmodul ska kommunicera med deras styrenheter. Vi vill ha en "standard", alltså samma kommunikation med alla plattformar. Vi diskuterade löst t ex I2C och SPI. Ska försöka ha ett möte snart med representant från varje grupp.
</p>
</div>
</div>
<div id="outline-container-sec-" class="outline-4">
<h4 id="sec-">Oklarheter</h4>
<div class="outline-text-4" id="text-">
<ul class="org-ul">
<li>Hur stort område skall vi täcka?
</li>
<li>Vilken upplösning behövs?
</li>
<li>Vad har vi för budget?
</li>
<li>Hur många moduler ska vi bygga? Jag lutar åt 4, en för varje plattform, samt en i backup/för testning. Täcker budgeten detta?
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-" class="outline-4">
<h4 id="sec-">Gå vidare</h4>
<div class="outline-text-4" id="text-">
<p>
Vi ska imorgon träffa Tommy (Andersson) och diskutera olika möjligheter. Efter detta tänker vi oss att vi kan bestämma oss för hur vi går fram.
</p>
</div>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-04-04</h3>
<div class="outline-text-3" id="text-">
<p>
Vi hade möte med Tommy, se <a href="./Tommy2017-04-04.html">anteckningar</a>
</p>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-04-05</h3>
<div class="outline-text-3" id="text-">
<ul class="org-ul">
<li>Vi skrev klart planeringsdokumenten - ett Ganntdiagram, ansvarsschema och milstolpedokument
</li>
<li>Vi gjorde en preliminär backlog för projektet. Vi diskuterade fram alla de små tasks vi behöver utföra för att klara projektet. Bild av backlogg: <a href="./bilder/backlog2017-04-05.pdf">länk</a>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-04-07</h3>
<div class="outline-text-3" id="text-">
<ul class="org-ul">
<li>Vi återkom till planeringsdokumenten och gjorde färdigt dessa och lämnade in dem
</li>
<li>Vi började sammanställa vår research till en förstudie som ska ingå i rapporten 
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-04-10</h3>
<div class="outline-text-3" id="text-">
<ul class="org-ul">
<li>Jag byggde ihop en liten lysdiodsrigg som vi kan använda till att testa opencv
</li>
<li>Gjorde research på seriell kommunikation, samt pratade informellt med plattformsgrupperna
<ul class="org-ul">
<li>SPI verkar lättare än tex I2C, samt att arduinokorten har dedikerade headers
</li>
<li>Det verkar som att plattformsgrupperna kommer kommunicera med robotarmarna över SPI, och att vi då kommer ha en gemensam buss
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-04-11</h3>
<div class="outline-text-3" id="text-">
<p>
Det var föreläsning om teknisk problemlösning på förmiddagen, och gruppseminarium kopplat till detta på eftermiddagen. Vi är lite frustrerade i gruppen då det som togs upp på föreläsningen är sådant vi redan utrett i vår förstudie. Men vi kom fram till att det finns ett värde dels i att faktiskt noggrant och systematiskt gå igenom problemformuleringen, dels att omvärdera sina tidigare slkutsatser och se dem i ett nytt ljus. Vi producerade ett dokument med kravspecifikation, som vi nog kommer inkludera i eller bifoga till rapporten. 
</p>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-04-12</h3>
<div class="outline-text-3" id="text-">
<p>
Jag arbetade med geometrin och formlerna för att överföra bildkoordinater vi får ut från opencv till rumskoordinater i banan som roboten kör på. Metoden för detta finns <a href="./Koordinatmappning.html">här</a>
</p>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-04-13</h3>
<div class="outline-text-3" id="text-">
<ul class="org-ul">
<li>Vi hade möte med representanter från plattformsgrupperna, integrationsgruppen, och jag och Gustaf från positioneringsgruppen. Vi la fram våra två lösningar, och plattformsgrupperna verkade köpa vårt koncept med antingen två leds eller två micar på roboten som vi bestämmer positionen mot. Hur de ska monteras och vems ansvar detta är är en öppen fråga. Vi diskuterade också hur kommunikationen mellan de olika inbyggda systemen på roboten ska kommunicera. Vi bestämde oss för att undersöka SPI, som har de fördelarna att vi kan köra all kommunikation över en gemensam buss för alla enheter, samt att det finns stöd på bla arduino due för DMA, alltså att det finns dedikerad kontroller för SPI, så att ett huvudprogram med tex RTOS inte behöver ha ansvar för kommunikationen. Vi bestämde att integrationsgruppen ska undersöka om vi kan koppla samman 5 enheter på en buss.
</li>
<li>Jag började arbeta på pythonkoden för koordinatmappningen, i filen coordmapping.py. Jag experimenterade med numpy, och konstaterade att numpy.multiply inte är matrismultiplikation, utan elementvis multiplikation. För matrismultiplikation används numpy.matmul.
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-04-17</h3>
<div class="outline-text-3" id="text-">
<p>
Första fälttestet på Niagara. Vi mätte upp en rektangulär bana på golvet i Niagara med <i>perfekta</i> räta vinklar, som vi fick fram genom att mäta upp 3-4-5-trianglar, samt satte ut ett antal testpunkter. Vi fotade sedan detta från två olika vinklar. Rakt ovanifrån två trappor upp i Niagara är den mest lovande vinkeln. Jag antecknade koordinaterna för testpunkterna relativt hörnen i <a href="./niagara2017-04-17.html">detta dokument</a>. 
</p>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-04-20</h3>
<div class="outline-text-3" id="text-">
<p>
Arbetade med att fastställa koordinater utifrån avstånd till kända punkter. Ofta kallas det triangulering, men om det är sträckor man mätt upp kallas det trilaterering. Det krävs tre kända punkter, härav trilaterering, men om man har två kända punkter får man två möjliga positioner, och det är oftast tillräckligt. Med två avstånd kallas detta bilaterering. Vi har två saker i projektet som behöver detta
</p>
<ul class="org-ul">
<li>Ultraljudslösningen bygger på detta
</li>
<li>När vi mäter upp en bana och lägger ut objekt vill vi veta vilka koordinater dessa har. Enklast är att mäta avstånd från två av våra hörn och bilaterera.
</li>
</ul>
<p>
Min härledning av formeln för bilaterering är denna, <a href="./bilder/Bilateration.jpg">länk till bild</a>. a och c är i härledningen x- och ykoordinater. Jag har även skrivit en funktion i filen koordmapping.py:
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">bilateration med tv&#229; k&#228;nda punkter, en i origo och den andra p&#229; y-axeln med avst&#229;nd dist till origo. </span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">r1 &#228;r ok&#228;nda punktens avst&#229;nd till origo, r2 avst&#229;nd till andra punkten. </span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">Returnerarpositivt x-v&#228;rde, &#228;ven -x &#228;r giltig l&#246;sning</span>
<span style="color: #4f97d7; font-weight: bold;">def</span> <span style="color: #bc6ec5; font-weight: bold;">bilat</span><span style="color: #4f97d7;">(</span>dist, r1, r2<span style="color: #4f97d7;">)</span>:
  <span style="color: #7590db;">y</span> = <span style="color: #4f97d7;">(</span>r1**<span style="color: #a45bad;">2</span> - r2**<span style="color: #a45bad;">2</span> + dist**<span style="color: #a45bad;">2</span><span style="color: #4f97d7;">)</span> / <span style="color: #4f97d7;">(</span><span style="color: #a45bad;">2</span> * dist<span style="color: #4f97d7;">)</span>
  <span style="color: #7590db;">x</span> = math.sqrt<span style="color: #4f97d7;">(</span>r1**<span style="color: #a45bad;">2</span> - y**<span style="color: #a45bad;">2</span><span style="color: #4f97d7;">)</span>
  <span style="color: #4f97d7; font-weight: bold;">return</span> <span style="color: #4f97d7;">(</span>x, y<span style="color: #4f97d7;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-04-22</h3>
<div class="outline-text-3" id="text-">
<p>
Egentligen inte en arbetsdag, men jag byggde en ställning eller rigg för att på ett säkert sätt kunna ha den kamera vi ska använda en bit ut från kanten två våningar upp på Niagara. Detta för att den ska komma så nära mitt över banan som möjligt. Konstruktionen är i träreglar med säkerhetslina 
</p>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-04-23</h3>
<div class="outline-text-3" id="text-">
<p>
Fälttest på Niagara. Vi testade flera saker
</p>
<ul class="org-ul">
<li>Om vårt opencv-program kunde identifiera en lysdiod med kameran på tredje våningen
</li>
<li>Om vi kunde ha kameran ut över kanten och ca en meter ut, för att kunna filma ner på bottenplan mer eller mindre rakt uppifrån
</li>
<li>Om vi kunde få ut koordinater live via opencv och kunna mappa dem till det koordinatsystem vi definierat på golvet med hjälp av den mappningskod jag skrivit i python
</li>
<li>Hur noggrant systemet är
</li>
</ul>
<p>
Resultatet var genomgående lyckat, med lite justeringar kunde vi identifiera lysdioder, och även liveuppdateringen fungerade. Kameran var stabil i den rigg jag byggt. Noggrannheten var mer problematiskt - koordinater i y-led hade en felmarginal på under 3cm, men i x-led var felmarginalen upp till 20cm, vilket vi inte anser godtagbart. Vi identifierade ett skäl till detta, att om dioden är en bit över marken blir felet större, vilket är rimligt. Detta planerar jag att korrigera för med lite mer avancerad geometri, där vi identifierar kamerans position bland annat. Detta verkar dock inte lösa hela felet. Vi tror att om vi kartlägger hur stort felet är på olika platser på banan kan vi i koden kompensera för detta och komma ner under 10cm felmarginal med opencv-metoden.
</p>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-04-24</h3>
<div class="outline-text-3" id="text-">
<p>
Idag utvärderade vi fälttestet från igår. Annars hände ingenting
</p>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-04-25</h3>
<div class="outline-text-3" id="text-">
<p>
Föreläsning om testning på förmiddagen. På eftermiddagen hade vi gruppseminarium där vi fastställde en kravspecifikation och började skriva testfall
</p>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-04-27</h3>
<div class="outline-text-3" id="text-">
<ul class="org-ul">
<li>På förmiddagen satt jag och Anton och gick igenom rapporten inför inlämning till M2. Vi har en hel del skrivet material att arbeta med, som vi framställt till största delen på seminarierna. Problemet blir att få ihop en rapport som går att läsa utan att ha tagit del av seminarieinstruktionerna. Just nu känns texten mest som ett svar på frǻgor, inte en fristående text. Jag tror inte att vi kommer hinna skriva om allt det till M2-inlämningen, det får nog vänta till slutinlämningen.
</li>
<li>På eftermiddagen renskrev jag en del av rapporten utifrån det vi gått igenom på förmiddagen. Det blev inte en stor omskrivning som jag tror krävs till en slutinlämning, utan jag fokuserade mest på att ta bort en del duplikation, städa upp lite språkligt, och klargöra vissa delar.
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-05-02</h3>
<div class="outline-text-3" id="text-">
<ul class="org-ul">
<li>Vi satte igång arbete på allvar med ultraljudspositionering. Det är många rörliga delar som måste sitta ihop. Jag och Micke började med arbetet hur vi ska generera pulser av något slag från tre olika fyrar. Vi arbetade efter följande kriterier:
<ul class="org-ul">
<li>Pulserna genereras centralt från ett arduinokort, och vi drar (långa) sladdar till de tre fyrarna. Detta för att slippa synkronisera olika utvecklingskort
</li>
<li>Fyrarna ska i tur skicka en puls av viss längd, sedan ska vi ha någon paus, och sedan ska nästa fyr göra likadant, etc. Efter att alla fyrar skickat puls ska det vara tyst i mediet. Med denna procedur bör vi kunna identifiera vilken fyr som sänder vilken puls, och därmed kunna bestämma avstånd.
</li>
</ul>
<p>
Vi genererade först signal från signalgenerator och använde transistorer för att switcha på de olika kanalerna (alltså fyrarna). Vid mätning med oscilloskop fick vi inte förväntat resultat. Vi diskuterade med Tommy, och han föreslog att vi inte behövde en sinusvåg och alltså inte en funktionsgenerator, utan en fyrkantsvåg genererat av digitalpinnar på utvecklingskortet borde vara bättre. Vi inledde arbetet med detta, men blev inte färdiga.
</p>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-05-03</h3>
<div class="outline-text-3" id="text-">
<p>
Idag har jag sökt information om konceptet homografi. Jag gjorde en egensnickrad koordinatmappning till vår opencvlösning, som vid första testet gav okej resultat på en del ställen av banan, men sämre under andra. Jag hittade ett bra namn på det nu, homografi alltså, och därmed blev det lätt att hitta bra källor, t ex <a href="http://www.learnopencv.com/homography-examples-using-opencv-python-c/">denna</a> eller <a href="https://www.cs.ubc.ca/grads/resources/thesis/May09/Dubrofsky_Elan.pdf">denna</a>.
</p>

<p>
Problemet är detta: jag vill hitta en transformation, alltså en matris, som mappar om en pixelkoordinat från en digital bild till en koordinat i verkliga världen som är relativ till någon form av bana eller koordinatsystem vi ritat upp på golvet i Niagara. <a href="./Koordinatmappning.html">Min egna metod</a> gör detta, men jag anar att den inte gör det optimalt. Däremot verkar iden om en matris som uppnår detta vara allmänt vedertagen. En av de ovan länkarna är en forskningsartikel med härledning av formeln för en homografimatris, den andra är en praktisk guide om hur detta genomförs i opencv-biblioteket.
</p>

<p>
Resultatet av denna research är min implementation i funktionen calibrate i filen coordmapping.py i vårt kodrepo.
</p>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-05-05</h3>
<div class="outline-text-3" id="text-">
<p>
Vi har god stämning i gruppen, men idag uppstod en liten konflikt. Gustaf och Anton hade olika uppfattningar om hur ett problem skulle lösas, Gustaf ville lösa det temporärt så att vi kunde genomföra ett test, och Anton ansåg att det borde göras ordentligt. Jag försökte medla och lösa konflikten. Min taktik var att be dem förklara sin åsikt för mig, och på så sätt, via mig, kunna nå en överenskommelse. Jag filmade det också, delvis för dokumentationen av projektarbetet, men också för att de skulle tänka efter lite extra om de visste att de blev filmade. De nådde något av en kompromiss tillslut, och det hela är dokumenterat <a href="https://youtu.be/cvYUlMf6RG4">på youtube</a>.
</p>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-05-08</h3>
<div class="outline-text-3" id="text-">
<p>
Research barrel distortion
</p>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-05-14</h3>
<div class="outline-text-3" id="text-">
<p>
Inför inlämning M3 har jag idag gjort följande
</p>
<ul class="org-ul">
<li>Skrivit avsnittet Ommappning av koordinater i avsnittet Resultat i rapporten
</li>
<li>Två diagram till rapporten som beskriver koordinatmappningen. Det ena är en systembeskrivning, och illustrerar vilka parametrar som krävs för koordinatmappningen. Det andra är ett blockschema som tydligt visar hur programmet kör och vilka steg det tar. Finns i rapporten under Resultat. Länk till <a href="./bilder/Systembeskrivning_coordmapping.png">systembeskrivning</a> och <a href="./bilder/coordmapping_blockschema.png">blockschema</a>
</li>
<li>Renskrivit inlämningen till M3, alltså hela Resultatdelen
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-05-16</h3>
<div class="outline-text-3" id="text-">
<p>
Utvärdering och undersökning av kompensation av fel
</p>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-05-18</h3>
<div class="outline-text-3" id="text-">
<p>
Gustaf har tagit fram en kompensation utifrån mätdata från testningen. Vi har kunnat konstatera att det uppstår ett fel längs respektive x- och y-axel, som växer med avståndet från origo. När vi testade med Gustafs kompensation överkompenserade den generellt felet. Jag fick härom dagen en intuition om varför det blir så, och idag översatte jag den intuitionen i formler, och lyckades övertyga Gustaf om att det är en sund matematisk modell. Teorin är följande: Gustafs kompensation kompenserar samtidigt för fel i både x- och y-axel, som om det är två oberoende fel. I min modell av felet beror felet snarare enbart på det diagonala avståndet från origo, och det visar sig något olika i x- och y-led. Det innebär att vi istället för att kompensera i båda led ska göra en kompensation där vi viktar om vi ska kompensera enligt data från x-led eller y-led beroende på hur långt vi befinner oss från origo. Formeln för denna modell är följande för xkoordinaten (något förenklad):
</p>

<p>
\[x_{kompensation} = \frac{x_{fel} \cdot x + y_{fel} \cdot y}{x + y}, x + y \neq 0 \]
</p>

<p>
Detta har jag implementerat i funktionen get_weighted_compensation i coordmapping.py i gitrepot.
</p>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-05-25</h3>
<div class="outline-text-3" id="text-">
<p>
Jag skrev idag stycket i rapporten som handlar om teorin bakom koordinatmappning i delen Genomförande. Det är en bra sammanfattning av den matematik som ingår i mappningen mellan koordinater som kommer från opencv till världskoordinater vi faktiskt kan använda oss av.
</p>
</div>
</div>
<div id="outline-container-sec-" class="outline-3">
<h3 id="sec-">2017-05-26</h3>
<div class="outline-text-3" id="text-">
<p>
Jag har idag renskrivit stora delar av rapporten. Vi hade som ambition att göra det i grupp, och kom en bit in i rapporten, men det gick väldigt långsamt. Istället skrev de andra på mjukvarudokumentationen, och jag renskrev på egen hand. Det var effektivare användning av gruppens resurser, och för mig är det enklare att renskriva på egen hand.
</p>
</div>
</div>
</div>
</div></div></div>
</body>
</html>
